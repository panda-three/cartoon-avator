# MVP 阶段性功能拆分（依据 `docs/mvp.md`）

## 阶段 1：风格包与页面骨架
- 风格包：落地 `StylePack` 配置与启用/停用（对应 `6.1`），创建页可选择风格包并展示示例图（对应 `5.2`、`6.1.1`）
- 页面路由：`/`、`/create`、`/jobs/{id}`、`/account`、`/login`、`/pricing`（对应 `5.*`）
- 创建页交互：上传 1 张图片入口 + 前端校验提示（格式/大小/引导文案），「更像画风 / 更像本人」参数可编辑（对应 `5.2`）
- 首页：风格包画廊 + 订阅价格展示 + FAQ 区块（对应 `5.1`）

## 阶段 2：生成任务（Job）闭环（OpenRouter）
- Job：实现任务创建、状态流转 `queued/running/succeeded/failed/canceled`、结果持久化（对应 `6.2`、`8`）
- 结果页：展示任务状态、成功后 4 张结果网格与单张预览；支持“再生成一组（同参数）/调整参数后再生成”（对应 `5.3`、`4`）
- OpenRouter 调用：按 `6.2.1` 接入 `POST /api/v1/chat/completions`，解析 `choices[0].message.images[].image_url.url`
- 身份近似策略：实现两段式（视觉描述 → 风格生图）（对应 `6.2.2`）
- 失败与重试：任务失败可重试并给通用原因文案（对应 `6.2`）

## 阶段 3：订阅与额度（Creem）
- 订阅：实现 `/pricing` 订阅入口与 Creem Webhook 回调，同步订阅状态与到期时间（对应 `5.5`、`6.3`）
- 权限：未订阅不可创建任务；订阅有效且额度 > 0 才可创建（对应 `6.3`、`10`）
- 额度：按“生成一次=消耗 1 次（产出 4 张）”计；成功后扣额度、失败不扣（对应 `6.3`、`0`、`6.2`）
- 并发：同一用户同时最多 1 个任务（对应 `6.3`）
- 到期/扣款失败：停止创建任务；历史结果在保留期内仍可下载（对应 `6.3`）

## 阶段 4：账户、历史记录、删除与 7 天保存期
- 账户页：展示订阅状态、当月额度、Creem 客户门户入口（对应 `5.4`）
- 历史记录：展示最近 30 次任务，支持下载与删除（对应 `6.4`）
- 删除：用户可删除上传原图与生成结果，删除后不可再访问（对应 `6.5`、`10`）
- 保存期：默认保留 7 天，到期清理（对应 `0`、`6.5`）
- 内容安全：落实上传限制 + 依赖生成侧安全策略（对应 `6.5`）

----------

## 阶段 5：MVP 可靠性与验收
- 性能：创建任务快速返回任务 ID；结果页轮询更新任务状态（对应 `7`）
- 可用性：第三方服务异常时降级提示，避免白屏（对应 `7`）
- 成本控制：额度 + 并发 + 单任务超时上限（对应 `7`）
- 观测：记录任务耗时、失败率、第三方错误码、转化漏斗（对应 `7`、`9`）
- 验收：逐条通过 `10` 的手动验收清单
